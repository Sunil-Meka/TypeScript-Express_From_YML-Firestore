"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const common_1 = require("./common");
const __1 = require("..");
const dist_1 = require("../../../types/dist");
test('non-unique enum values', async () => {
    const result = await (0, common_1.createTestDocument)('enums/non-unique-enum-values.yml');
    const op = result.groups[0].operations[0];
    expect(op).toBeDefined();
    expect(op.queryParams['param1']).toBeDefined();
    expect(op.queryParams['param1'].schema.schemaType).toEqual(dist_1.CodegenSchemaType.ENUM);
    const schema = op.queryParams['param1'].schema;
    expect(schema).toBeDefined();
    expect(schema.enumValues).not.toBeNull();
    expect(__1.idx.size(schema.enumValues)).toBe(5);
    const seenNames = new Set();
    for (const enumValue of __1.idx.allValues(schema.enumValues)) {
        if (seenNames.has(enumValue.name)) {
            throw new Error(`Duplicate enum value: ${enumValue.name}`);
        }
        seenNames.add(enumValue.name);
    }
    expect(seenNames.size).toBe(5);
});
